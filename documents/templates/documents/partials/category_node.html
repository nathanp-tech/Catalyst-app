<li>
    <div class="category-item">
        <i class="fas fa-chevron-down icon"></i>
        <i class="fas fa-folder"></i>
        <span>{{ node.name }}</span>
    </div>
    <ul>
        {% for child in node.children.all %}
            {% include "documents/partials/category_node.html" with node=child %}
        {% endfor %}

        {% for doc in node.sorted_documents|default:node.documents.all %}
            {% if not doc.solution_for %} {# Affiche uniquement les exercices, pas les corrig√©s directement #}
            <li>
                <div class="document-item">
                    <div class="document-info">
                        <i class="fas status-icon {% if doc.file %}fa-check-circle status-ok{% else %}fa-upload status-missing{% endif %}"></i>
                        <i class="far fa-file-alt doc-type-icon"></i>
                        <span>{{ doc.title }}</span>
                    </div>
                    <div class="document-actions">
                        {% if doc.file %}
                            <a href="{{ doc.file.url }}" target="_blank" class="upload-btn view-btn">Voir</a>
                            <form action="{% url 'documents:clear-file' doc.pk %}" method="post" style="display: inline;" onsubmit="return confirm('Voulez-vous vraiment remplacer ce fichier ?');">
                                {% csrf_token %}
                                <button type="submit" class="upload-btn replace-btn" title="Supprimer le fichier"><i class="fas fa-trash-alt"></i></button>
                            </form>
                        {% else %}
                            <a href="{% url 'documents:update-file' doc.pk %}" class="upload-btn">Uploader</a>
                        {% endif %}
                    </div>
                </div>
                {% if doc.solution %}
                <div class="document-item solution-item">
                    <div class="document-info">
                        <i class="fas status-icon {% if doc.solution.file %}fa-check-circle status-ok{% else %}fa-upload status-missing{% endif %}"></i>
                        <i class="fas fa-file-signature doc-type-icon"></i>
                        <span>{{ doc.solution.title }}</span>
                    </div>
                    <div class="document-actions">
                        {% if doc.solution.file %}
                            <a href="{{ doc.solution.file.url }}" target="_blank" class="upload-btn view-btn">Voir</a>
                            <form action="{% url 'documents:clear-file' doc.solution.pk %}" method="post" style="display: inline;" onsubmit="return confirm('Voulez-vous vraiment remplacer ce fichier ?');">
                                {% csrf_token %}
                                <button type="submit" class="upload-btn replace-btn" title="Supprimer le fichier"><i class="fas fa-trash-alt"></i></button>
                            </form>
                        {% else %}
                            <a href="{% url 'documents:update-file' doc.solution.pk %}" class="upload-btn">Uploader</a>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
            </li>
            {% endif %}
        {% endfor %}
    </ul>
</li>
